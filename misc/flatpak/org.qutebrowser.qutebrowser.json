{
    "app-id": "org.qutebrowser.qutebrowser",
    "branch": "stable",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.9",
    "sdk": "org.kde.Sdk",
    "command": "qutebrowser",
    "finish-args": [
        "--device=dri",
        "--filesystem=home:ro",
        "--filesystem=xdg-download",
        "--share=network",
        "--socket=pulseaudio",
        "--socket=wayland",
        "--socket=x11"
    ],
    "rename-desktop-file": "qutebrowser.desktop",
    "rename-appdata-file": "qutebrowser.appdata.xml",
    "rename-icon": "qutebrowser",
    "modules": [
        {
            "name": "MarkupSafe",
            "buildsystem": "simple",
            "build-commands": ["python3 setup.py install --prefix=/app"],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://pypi.python.org/packages/4d/de/32d741db316d8fdb7680822dd37001ef7a448255de9699ab4bfcbdf4172b/MarkupSafe-1.0.tar.gz",
                    "sha256": "a6be69091dac236ea9c6bc7d012beab42010fa914c459791d627dad4910eb665"
                }
            ]
        },
        {
            "name": "attrs",
            "buildsystem": "simple",
            "build-commands": ["python3 setup.py install --prefix=/app"],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://pypi.python.org/packages/8b/0b/a06cfcb69d0cb004fde8bc6f0fd192d96d565d1b8aa2829f0f20adb796e5/attrs-17.4.0.tar.gz",
                    "sha256": "1c7960ccfd6a005cd9f7ba884e6316b5e430a3f1a6c37c5f87d8b43f83b54ec9"
                }
            ]
        },
        {
            "name": "cssutils",
            "buildsystem": "simple",
            "build-commands": ["python3 setup.py install --prefix=/app"],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://pypi.python.org/packages/5c/0b/c5f29d29c037e97043770b5e7c740b6252993e4b57f029b3cd03c78ddfec/cssutils-1.0.2.tar.gz",
                    "sha256": "a2fcf06467553038e98fea9cfe36af2bf14063eb147a70958cfcaa8f5786acaf"
                }
            ]
        },
        {
            "name": "Jinja2",
            "buildsystem": "simple",
            "build-commands": ["python3 setup.py install --prefix=/app"],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://pypi.python.org/packages/56/e6/332789f295cf22308386cf5bbd1f4e00ed11484299c5d7383378cf48ba47/Jinja2-2.10.tar.gz",
                    "sha256": "f84be1bb0040caca4cea721fcbbbbd61f9be9464ca236387158b0feea01914a4"
                }
            ]
        },
        {
            "name": "Pygments",
            "buildsystem": "simple",
            "build-commands": ["python3 setup.py install --prefix=/app"],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://pypi.python.org/packages/71/2a/2e4e77803a8bd6408a2903340ac498cb0a2181811af7c9ec92cb70b0308a/Pygments-2.2.0.tar.gz",
                    "sha256": "dbae1046def0efb574852fab9e90209b23f556367b5a320c0bcb871c77c3e8cc"
                }
            ]
        },
        {
            "name": "pyPEG2",
            "buildsystem": "simple",
            "build-commands": ["python3 setup.py install --prefix=/app"],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://pypi.python.org/packages/f9/bd/10398e2c2d2070cc8a9c7153abfbd4ddb2895a2c52a32722ab8689e0cc7d/pyPEG2-2.15.2.tar.gz",
                    "sha256": "2b2d4f80d8e1a9370b2a91f4a25f4abf7f69b85c8da84cd23ec36451958a1f6d"
                }
            ]
        },
        {
            "name": "PyYAML",
            "buildsystem": "simple",
            "build-commands": ["python3 setup.py install --prefix=/app"],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://pyyaml.org/download/pyyaml/PyYAML-3.12.tar.gz",
                    "sha256": "592766c6303207a20efc445587778322d7f73b161bd994f227adaa341ba212ab"
                }
            ]
        },
        {
            "name": "PyQT5",
            "buildsystem": "simple",
            "build-commands": [
                "python3 configure.py --confirm-license --assume-shared --verbose --sip=/app/bin/sip --sip-incdir=/app/include/python3.5 --destdir /app/lib/python3.5/site-packages --bindir /app/bin --qml-plugindir=/app/lib/plugins/PyQt5 --no-sip-files --no-stubs --no-tools",
                "make",
                "make install"
            ],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://sourceforge.net/projects/pyqt/files/PyQt5/PyQt-5.9.2/PyQt5_gpl-5.9.2.tar.gz",
                    "sha256": "c190dac598c97b0113ca5e7a37c71c623f02d1d713088addfacac4acfa4b8394"
                }
            ],
            "modules": [
                {
                    "name": "sip",
                    "buildsystem": "simple",
                    "build-commands": [
                        "python3 configure.py -d /app/lib/python3.5/site-packages -b /app/bin -e /app/include/python3.5 -v /app/share/sip",
                        "make",
                        "make install"
                    ],
                    "ensure-writable": ["easy-install.pth"],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://sourceforge.net/projects/pyqt/files/sip/sip-4.19.6/sip-4.19.6.tar.gz",
                            "sha256": "9dda27ae181bea782ebc8768d29f22f85ab6e5128ee3ab21f491febad707925a"
                        }
                    ]
                }
            ]
        },
        {
            "name": "qutebrowser",
            "buildsystem": "simple",
            "build-commands": [
                "python3 setup.py install --prefix=/app"
            ],
            "post-install": [
                "install -Dm644 misc/qutebrowser.desktop /app/share/applications/qutebrowser.desktop",
                "install -Dm644 icons/qutebrowser.svg /app/share/icons/hicolor/scalable/apps/qutebrowser.svg",
                "for SIZE in 16 24 32 48 64 128 256 512; do install -Dm644 icons/qutebrowser-${SIZE}x${SIZE}.png /app/share/icons/hicolor/${SIZE}x${SIZE}/apps/qutebrowser.png; done"
            ],
            "ensure-writable": ["easy-install.pth"],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/qutebrowser/qutebrowser.git",
                    "tag": "v1.1.0"
                }
             ]
         }
    ]
}
